<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ name }} - CV</title>
  <style>
    :root {
      --bg: #f4f6fb;
      --card: #ffffff;
      --ink: #1f2933;
      --accent: #1f2933;
      --accent-light: #a5b4fc;
    }
    .cv-template *, .cv-template *::before, .cv-template *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    .cv-template {
      font-family: "Inter", Arial, sans-serif;
      background: var(--bg);
      padding: 32px;
      color: var(--ink);
    }
    .cv-template .cv-wrapper {
      max-width: 900px;
      margin: 0 auto;
      background: var(--card);
      box-shadow: 0 18px 32px rgba(15,23,42,0.12);
    }
    .cv-template header {
      background: var(--accent);
      color: #ffffff;
      padding: 38px 44px;
    }
    .cv-template header h1 {
      font-size: 38px;
      margin-bottom: 4px;
      letter-spacing: 1px;
    }
    .cv-template header .headline {
      font-size: 16px;
      text-transform: uppercase;
      letter-spacing: 4px;
      color: var(--accent-light);
    }
    .cv-template header .contact {
      margin-top: 16px;
      font-size: 14px;
      color: #e2e8f0;
      line-height: 1.6;
    }
    .cv-template main {
      padding: 40px 44px;
      display: flex;
      flex-wrap: wrap;
      gap: 32px;
      align-items: flex-start;
    }
    .cv-template section {
      margin-bottom: 28px;
    }
    .cv-template section:last-child {
      margin-bottom: 0;
    }
    .cv-template .full-width {
      flex: 1 1 100%;
    }
    .cv-template h2 {
      text-transform: uppercase;
      font-size: 13px;
      letter-spacing: 0.22em;
      color: #0f172a;
      margin-bottom: 14px;
      border-bottom: 2px solid #e2e8f0;
      padding-bottom: 6px;
    }
    .cv-template p,
    .cv-template li,
    .cv-template span {
      line-height: 1.7;
      font-size: 14px;
      color: #425466;
    }
    .cv-template .experience {
      margin-bottom: 18px;
    }
    .cv-template .experience h3 {
      font-size: 17px;
      margin-bottom: 2px;
      color: #111827;
    }
    .cv-template .experience .meta {
      font-size: 13px;
      color: #94a3b8;
      margin-bottom: 6px;
    }
    .cv-template .experience ul {
      padding-left: 18px;
    }
    .cv-template .experience li {
      margin-bottom: 6px;
    }
    .cv-template .skills ul {
      list-style: none;
      padding: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .cv-template .skills li {
      background: #e0f2fe;
      color: #0369a1;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 13px;
    }
    .cv-template .project,
    .cv-template .education-item,
    .cv-template .cert-item {
      margin-bottom: 16px;
    }
    .cv-template .project h3,
    .cv-template .education-item h3,
    .cv-template .cert-item h3 {
      font-size: 16px;
      color: #111827;
      margin-bottom: 4px;
    }
    .cv-template .column {
      display: flex;
      flex-direction: column;
      gap: 28px;
    }
    .cv-template .column-main {
      flex: 1 1 63%;
      max-width: 63%;
    }
    .cv-template .column-side {
      flex: 1 1 32%;
      max-width: 32%;
    }
    @media print {
      .cv-template {
        padding: 0;
        background: #ffffff;
      }
      .cv-template .cv-wrapper {
        box-shadow: none;
      }
      .cv-template main {
        display: block;
        padding: 32px 40px;
      }
      .cv-template .column,
      .cv-template .column-main,
      .cv-template .column-side {
        flex: 1 1 100%;
        max-width: 100%;
      }
      .cv-template section {
        break-inside: auto;
        page-break-inside: auto;
      }
      .cv-template .experience,
      .cv-template .project,
      .cv-template .education-item,
      .cv-template .cert-item {
        break-inside: avoid;
        page-break-inside: avoid;
      }
    }
  </style>
</head>
<body>
  {% macro render_block(block) %}
    {% if block.id == "summary" and summary %}
      <section class="full-width" data-block="summary">
        <h2>{{ block.label }}</h2>
        <p>{{ summary }}</p>
      </section>
    {% elif block.id == "experiences" and experiences %}
      <section data-block="experiences">
        <h2>{{ block.label }}</h2>
        {% for exp in experiences %}
          <div class="experience">
            <h3>{{ exp.title }}</h3>
            <div class="meta">{{ exp.company }}{% if exp.period %} | {{ exp.period }}{% endif %}</div>
            {% if exp.achievements %}
              <ul>
                {% for bullet in exp.achievements %}
                  <li>{{ bullet }}</li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endfor %}
      </section>
    {% elif block.id == "projects" and projects %}
      <section data-block="projects">
        <h2>{{ block.label }}</h2>
        {% for project in projects %}
          <div class="project">
            <h3>{{ project.name }}</h3>
            <p>{{ project.description }}</p>
          </div>
        {% endfor %}
      </section>
    {% elif block.id == "skills" and skills %}
      <section class="skills" data-block="skills">
        <h2>{{ block.label }}</h2>
        <ul>
          {% for skill in skills %}
            {% set skill_name = skill.name if skill is mapping else skill %}
            <li>{{ skill_name }}</li>
          {% endfor %}
        </ul>
      </section>
    {% elif block.id == "education" and education %}
      <section data-block="education">
        <h2>{{ block.label }}</h2>
        {% for edu in education %}
          <div class="education-item">
            <h3>{{ edu.school }}</h3>
            <p>{{ edu.degree }}</p>
            <span>{{ edu.period }}</span>
          </div>
        {% endfor %}
      </section>
    {% elif block.id == "certifications" and certifications %}
      <section data-block="certifications">
        <h2>{{ block.label }}</h2>
        {% for cert in certifications %}
          <div class="cert-item">
            <h3>{{ cert.name }}</h3>
            <p>{{ cert.issuer }}</p>
            <span>{{ cert.period }}</span>
          </div>
        {% endfor %}
      </section>
    {% endif %}
  {% endmacro %}
  <div class="cv-template">
    <div class="cv-wrapper">
      <header>
        <h1>{{ name }}</h1>
        <div class="headline">{{ headline }}</div>
        <div class="contact">{{ contact_block }}</div>
      </header>
      {% set enabled_blocks = blocks | selectattr("enabled") | list %}
      {% set full_blocks = enabled_blocks | selectattr("placement", "equalto", "full") | list %}
      {% set main_blocks = enabled_blocks | rejectattr("placement", "equalto", "side") | rejectattr("placement", "equalto", "full") | list %}
      {% set side_blocks = enabled_blocks | selectattr("placement", "equalto", "side") | list %}
      <main>
        {% for block in full_blocks %}
          {{ render_block(block) }}
        {% endfor %}
        <div class="column column-main">
          {% for block in main_blocks %}
            {{ render_block(block) }}
          {% endfor %}
        </div>
        <div class="column column-side">
          {% for block in side_blocks %}
            {{ render_block(block) }}
          {% endfor %}
        </div>
      </main>
    </div>
  </div>
</body>
</html>
